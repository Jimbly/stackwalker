{"version":3,"sources":["node_modules/browser-pack/_prelude.js","dist/game/build.intermediate/client/client/app.js","dist/game/build.intermediate/client/glov/client/glov/bootstrap.js","dist/game/build.intermediate/client/glov/client/glov/local_storage.js","dist/game/build.intermediate/client/glov/client/glov/polyfill.js","dist/game/build.intermediate/client/client/main.js"],"names":[],"mappings":"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","file":"app.bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/* eslint global-require:off */\n\n// Startup code.\n\nlet called_once = false;\nwindow.onload = function () {\n  if (called_once) {\n    return;\n  }\n  called_once = true;\n  // require('./glov/worker_comm.js').startup(); // First, so it gets loading quickly (if workers required)\n  require('./glov/bootstrap.js');\n  require('./main.js').main();\n};\n","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\n// Things that should be done before requiring or running any user-level code or other engine code\n\nrequire('./polyfill.js');\n\nlet debug = document.getElementById('debug');\nwindow.onerror = function (e, file, line, col, errorobj) {\n  let msg = `${e}\\n  at ${file}(${line}:${col})`;\n  if (errorobj && errorobj.stack) {\n    msg = `${errorobj.stack}`;\n    if (errorobj.message) {\n      if (msg.indexOf(errorobj.message) === -1) {\n        msg = `${errorobj.message}\\n${msg}`;\n      }\n    }\n    let origin = document.location.origin || '';\n    if (origin) {\n      if (origin.slice(-1) !== '/') {\n        origin += '/';\n      }\n      msg = msg.split(origin).join(''); // replace\n    }\n    // fixup weird Firefox weirdness\n    msg = msg.replace(/\\[\\d+\\]</g, '') // remove funny [123] at start of stack lines\n      .replace(/<?\\/<?/g, '/') // remove funny <s, they mess up people's copy and paste\n      .replace(/\\n([^ ])/g, '\\n  $1'); // add indentation if missing\n  }\n  let show = true;\n  if (window.glov_error_report) {\n    show = window.glov_error_report(msg, file, line, col);\n  }\n  if (show) {\n    debug.innerText = `${msg}\\n\\nPlease report this error to the developer, and then reload this page.`;\n  }\n};\nwindow.debugmsg = function (msg, clear) {\n  if (clear) {\n    debug.innerText = msg;\n  } else {\n    debug.innerText += `${msg}\\n`;\n  }\n};\n","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint-env browser */\n\nexports.storage_prefix = 'demo';\n\nlet lsd = (function () {\n  try {\n    localStorage.test = 'test';\n    return localStorage;\n  } catch (e) {\n    return {};\n  }\n}());\nexport function get(key) {\n  key = `${exports.storage_prefix}_${key}`;\n  let ret = lsd[key];\n  if (ret === 'undefined') {\n    ret = undefined;\n  }\n  return ret;\n}\n\nexport function set(key, value) {\n  key = `${exports.storage_prefix}_${key}`;\n  if (value === undefined || value === null) {\n    delete lsd[key];\n  } else {\n    lsd[key] = value;\n  }\n}\n\nexport function setJSON(key, value) {\n  set(key, JSON.stringify(value));\n}\n\nexport function getJSON(key, def) {\n  let value = get(key);\n  if (value === undefined) {\n    return def;\n  }\n  try {\n    return JSON.parse(value);\n  } catch (e) {\n    // ignore\n  }\n  return def;\n}\n\nexport function clearAll(key_prefix) {\n  let prefix = new RegExp(`^${exports.storage_prefix}_${key_prefix || ''}`, 'u');\n  for (let key in lsd) {\n    if (key.match(prefix)) {\n      delete lsd[key];\n    }\n  }\n}\n\nexport function exportAll() {\n  let obj = {};\n  let prefix = new RegExp(`^${exports.storage_prefix}_(.*)`, 'u');\n  for (let key in lsd) {\n    let m = key.match(prefix);\n    if (m) {\n      let v = lsd[key];\n      if (v && v !== 'undefined') {\n        obj[m[1]] = v;\n      }\n    }\n  }\n  return JSON.stringify(obj);\n}\n\nexport function importAll(serialized) {\n  let obj = JSON.parse(serialized);\n  clearAll();\n  for (let key in obj) {\n    set(key, obj[key]);\n  }\n}\n","/* eslint no-extend-native:off,no-invalid-this:off */\n\n// TypedArray.slice, fill, join, sort, etc - not supported on IE, some older Safari, older Android\nlet typedarrays = [Int8Array, Uint8Array, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array];\n\nif (!Uint8Array.prototype.slice) {\n  typedarrays.forEach(function (ArrayType) {\n    Object.defineProperty(ArrayType.prototype, 'slice', {\n      value: function (begin, end) {\n        if (end === undefined) {\n          end = this.length;\n        }\n        if (end < 0) {\n          end = this.length - end;\n        }\n        begin = begin || 0;\n        if (begin >= this.length) {\n          begin = this.length - 1;\n        }\n        if (end > this.length) {\n          end = this.length;\n        }\n        if (end < begin) {\n          end = begin;\n        }\n        let len = end - begin;\n        let ret = new ArrayType(len);\n        for (let ii = begin; ii < end; ++ii) {\n          ret[ii] = this[ii];\n        }\n        return ret;\n      }\n    });\n  });\n}\n\nfunction cmpDefault(a, b) {\n  return a - b;\n}\nlet replacements = {\n  join: function (delim) {\n    return Array.prototype.join.call(this, delim);\n  },\n  fill: function (value, begin, end) {\n    if (end === undefined) {\n      end = this.length;\n    }\n    for (let ii = begin || 0; ii < end; ++ii) {\n      this[ii] = value;\n    }\n    return this;\n  },\n  sort: function (cmp) {\n    Array.prototype.sort.call(this, cmp || cmpDefault);\n  },\n};\n\nfor (let key in replacements) {\n  if (!Uint8Array.prototype[key]) {\n    typedarrays.forEach(function (ArrayType) {\n      Object.defineProperty(ArrayType.prototype, key, {\n        value: replacements[key],\n      });\n    });\n  }\n}\n\nif (!String.prototype.endsWith) {\n  Object.defineProperty(String.prototype, 'endsWith', {\n    value: function (test) {\n      return this.slice(-test.length) === test;\n    },\n  });\n  Object.defineProperty(String.prototype, 'startsWith', {\n    value: function (test) {\n      return this.slice(0, test.length) === test;\n    },\n  });\n}\n","/* eslint no-useless-catch:off */\nconst assert = require('assert');\nconst local_storage = require('./glov/local_storage.js');\nlocal_storage.storage_prefix = 'stackwalker';\n\nconst querystring = require('query-string');\nconst stack_mapper = require('stack-mapper');\n\nlet error_report_regex = /^([^ ]+) \\[([^\\]]+)] \"POST ([^\"?]+)?([^\"]+)\" START \"([^\"]+)\" \"([^\"]+)\"$/;\nlet fileline_regexs = [\n  /(.)([^(/:]+)\\((\\d+):(\\d+)\\)$/,\n  ///(?:at ([^(]+) \\(.*\\/)?([^(/:]+):(\\d+)(?::(\\d+))?\\)$/,\n  /(?:at ([^(]+) \\((?:.*\\/)?)?([^(/:]+):(\\d+)(?::(\\d+))?\\)$/,\n  /\\/*([^/@]+)\\/*@.*\\/([^(/:]+):(\\d+)(?::(\\d+))?$/,\n  /()([^(/:]+):(\\d+):(\\d+)?$/,\n];\n// at Object.replaceVideoShadowStyle (<anonymous>:1:3601)\n\nfunction prettyFileLine(a) {\n  if (a.fn) {\n    return `${a.fn} (${a.filename}:${a.line}:${a.column})`;\n  } else {\n    return `${a.filename}:${a.line}:${a.column}`;\n  }\n}\n\nfunction parseIgnoreList(text) {\n  let lines = text.split('\\n').filter((a) => a.trim());\n  return lines.map((a) => {\n    if (a[0] === '/') {\n      return new RegExp(a);\n    } else {\n      return a;\n    }\n  });\n}\n\nfunction jsonParse(text) {\n  try {\n    return JSON.parse(text);\n  } catch (e) {\n    return null;\n  }\n}\n\nfunction headerFromQuery(query) {\n  let header = [];\n  if (query.cidx && query.cidx !== '1') {\n    header.push(`CIDX=${query.cidx}`);\n  }\n  if (query.disconnected) {\n    header.push('DISCONNECTED');\n  }\n  if (query.ver) {\n    header.push(`ver=${query.ver}`);\n  }\n  if (query.user_id) {\n    header.push(`user_id=${query.user_id}`);\n  }\n  if (query.client_id) {\n    header.push(`client_id=${query.client_id}`);\n  }\n  return header;\n}\n\nfunction header2FromQuery(query) {\n  let header = [];\n  if (query.webgl) {\n    header.push(`WebGL${query.webgl}`);\n  }\n  if (query.renderer_unmasked) {\n    header.push(query.renderer_unmasked);\n  }\n  return header;\n}\n\nfunction ignored(list, text) {\n  if (!text) {\n    return false;\n  }\n  for (let ii = 0; ii < list.length; ++ii) {\n    if (list[ii] instanceof RegExp) {\n      if (text.match(list[ii])) {\n        return true;\n      }\n    } else if (text.indexOf(list[ii]) !== -1) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction userURL(url) {\n  let m = url.match(/[^?]+\\/(.*)/);\n  if (m) {\n    return m[1];\n  }\n  return url;\n}\n\nfunction preparseGcloud(json, ignore_list) {\n  let ret = [];\n  let ignore_cidx = ignore_list.indexOf('CIDX') !== -1;\n  let ignore_disconnected = ignore_list.indexOf('DISCONNECTED') !== -1;\n  for (let ii = 0; ii < json.length; ++ii) {\n    let record = json[ii];\n    let { timestamp } = record;\n    let query = record.jsonPayload;\n    assert(query);\n    if (ignored(ignore_list, query.msg)) {\n      continue;\n    }\n    if (ignore_cidx && query.cidx && query.cidx !== '1') {\n      continue;\n    }\n    if (ignore_disconnected && query.disconnected) {\n      continue;\n    }\n    ret.push(`User URL=${userURL(query.url)}, UA=${query.ua}, timestamp=${timestamp}`);\n    let header = headerFromQuery(query);\n    if (header.length) {\n      ret.push(header.join(', '));\n    }\n    let header2 = header2FromQuery(query);\n    if (header2.length) {\n      ret.push(header2.join(', '));\n    }\n    if (query.file) {\n      let m = query.file.match(/[^/]+$/);\n      ret.push(prettyFileLine({\n        filename: m && m[0],\n        line: query.line,\n        column: query.col,\n      }));\n    }\n    ret = ret.concat(query.msg.split('\\n'));\n\n    ret.push('');\n  }\n\n  return ret.join('\\n');\n}\n\nfunction preparse(text, ignore_list) {\n  let json;\n  if (text[0] === '[' && (json = jsonParse(text))) {\n    return preparseGcloud(json, ignore_list);\n  }\n  let lines = text.split('\\n');\n  let ret = [];\n  for (let ii = 0; ii < lines.length; ++ii) {\n    let line = lines[ii];\n    if (ignored(ignore_list, line)) {\n      continue;\n    }\n    let m = line.match(error_report_regex);\n    if (!m) {\n      ret.push(line);\n      continue;\n    }\n    // let ip = m[1];\n    // let timestamp = m[2];\n    // let url_start = m[3];\n    let search = m[4];\n    // let referrer = m[5];\n    let useragent = m[6];\n    let query = querystring.parse(search);\n    // Source URL line\n    if (query.url) {\n      ret.push('');\n      ret.push(`User URL=${userURL(query.url)}, UA=${useragent}`);\n    }\n    // Header line\n    let header = headerFromQuery(query);\n    if (header.length) {\n      ret.push(header.join(', '));\n    }\n    if (query.file) {\n      ret.push(prettyFileLine({\n        filename: query.file.match(/[^/]+$/)[0],\n        line: query.line,\n        column: query.col,\n      }));\n    }\n    ret = ret.concat(query.msg.split('\\n'));\n  }\n  return ret.join('\\n');\n}\n\nfunction parseStack(text, ignore_list) {\n  text = preparse(text, ignore_list);\n  let lines = text.split('\\n');\n  lines = lines.map((line) => {\n    let m;\n    for (let ii = 0; !m && ii < fileline_regexs.length; ++ii) {\n      m = line.match(fileline_regexs[ii]);\n    }\n    if (m) {\n      return {\n        fn: m[1],\n        filename: m[2],\n        line: m[3],\n        column: m[4] ? Number(m[4]) : undefined,\n        tooltip: line,\n      };\n    }\n    return { err: line, tooltip: line };\n  });\n  return lines;\n}\n\nexport function main() {\n  let uploads = [\n    document.getElementById('upload1'),\n    document.getElementById('upload2'),\n    document.getElementById('upload3'),\n  ];\n  let upload_status = document.getElementById('upload_status');\n  let stack = document.getElementById('stack');\n  let ignore = document.getElementById('ignore');\n  let frames_bundle = document.getElementById('frames_bundle');\n  let frames_source = document.getElementById('frames_source');\n  let sourcecode = document.getElementById('sourcecode');\n  let source_pre = document.getElementById('source_pre');\n  let source_line = document.getElementById('source_line');\n  let source_post = document.getElementById('source_post');\n  let fileinfo = document.getElementById('fileinfo');\n  let selected_line = document.getElementById('selected_line');\n\n  let stack_data;\n  let ignore_data;\n  let sourcemap_data = [];\n  let stackmapper = [];\n\n  let raw_lines;\n  function toOptions(list, skip_disabled) {\n    raw_lines = [];\n    return list.map((a) => {\n      let str = a.err !== undefined ? a.err : prettyFileLine(a);\n      raw_lines.push(str);\n      return `<option${a.err ? ' class=\"disabled\"' : ''}` +\n        `${a.tooltip?` title=\"${a.tooltip.replace(/\"/g, '&quot;').replace(/</g, '&lt;')}\"`:''}` +\n        `>${str.replace(/</g, '&lt;')}</option>`;\n    }).join('\\n');\n  }\n\n  let mapped_stack;\n\n  function update() {\n    // window.debugmsg('', true);\n    let ignore_list = parseIgnoreList(ignore_data);\n    let stack_frames = parseStack(stack_data, ignore_list);\n    frames_bundle.innerHTML = toOptions(stack_frames, true);\n    frames_bundle.raw_lines = raw_lines;\n\n    mapped_stack = null;\n    if (!stackmapper[0] && !stackmapper[1] && !stackmapper[2]) {\n      frames_source.innerHTML = toOptions([{ err: 'Missing sourcemap' }]);\n      return;\n    }\n    let line_mapping = {};\n    let to_process = [];\n    for (let ii = 0; ii < stack_frames.length; ++ii) {\n      let elem = stack_frames[ii];\n      if (elem.filename) {\n        line_mapping[ii] = to_process.length;\n        to_process.push({\n          filename: elem.filename,\n          line: elem.line,\n          column: elem.column ? elem.column - 1 : undefined, // the - 1 seems to help map to the right line a lot\n        });\n      }\n    }\n    let outs = [];\n    for (let ii = 0; ii < stackmapper.length; ++ii) {\n      if (stackmapper[ii]) {\n        outs[ii] = stackmapper[ii].map(to_process);\n        for (let jj = 0; jj < outs[ii].length; ++jj) {\n          assert.equal(outs[ii][jj], to_process[jj]); // this modifies in-place\n        }\n      }\n    }\n    let out_lines = [];\n    mapped_stack = [];\n    for (let ii = 0; ii < stack_frames.length; ++ii) {\n      if (line_mapping[ii] === undefined) {\n        mapped_stack.push(null);\n        out_lines.push({ err: '' });\n      } else {\n        let mapped = to_process[line_mapping[ii]];\n        mapped_stack.push(mapped);\n        out_lines.push(mapped);\n      }\n    }\n    frames_source.innerHTML = toOptions(out_lines);\n    frames_source.raw_lines = raw_lines;\n  }\n\n  function updateFocus() {\n    let idx = frames_bundle.selectedIndex;\n    let lineinfo = mapped_stack && mapped_stack[idx];\n    if (!sourcemap_data[0] && !sourcemap_data[1] && !sourcemap_data[2]) {\n      source_pre.textContent = 'No sourcemap loaded';\n      source_line.textContent = source_post.textContent = fileinfo.textContent = '';\n      return;\n    }\n    if (!lineinfo) {\n      source_pre.textContent = 'No source selected';\n      source_line.textContent = source_post.textContent = fileinfo.textContent = '';\n      return;\n    }\n    let { filename, line } = lineinfo;\n    for (let jj = 0; jj < sourcemap_data.length; ++jj) {\n      let { sources, sourcesContent } = sourcemap_data[jj];\n      fileinfo.textContent = `File: ${filename}`;\n      let found = -1;\n      for (let ii = 0; ii < sources.length; ++ii) {\n        if (sources[ii].endsWith(filename)) {\n          found = ii;\n        }\n      }\n      if (found === -1 || !sourcesContent[found]) {\n        continue;\n      }\n      let lines = sourcesContent[found].split('\\n');\n      source_pre.textContent = lines.slice(0, line - 1).join('\\n');\n      source_line.textContent = lines[line - 1];\n      source_post.textContent = lines.slice(line, lines.length).join('\\n');\n      source_line.scrollIntoView(true);\n      let st = sourcecode.scrollTop;\n      source_line.scrollIntoView(false);\n      st += sourcecode.scrollTop;\n      sourcecode.scrollTop = Math.round(st / 2);\n      return;\n    }\n    source_pre.textContent = `Could not find ${filename} in sourcemap.sources`;\n    source_line.textContent = source_post.textContent = '';\n  }\n\n  uploads.forEach((elem, idx) => {\n    elem.addEventListener('change', (ev) => {\n      let file_to_load = elem.files[0];\n      if (!file_to_load) {\n        return;\n      }\n      let reader = new FileReader();\n      local_storage.set('sourcemap', undefined);\n      sourcemap_data[idx] = null;\n      stackmapper[idx] = null;\n      reader.onload = (loaded_event) => {\n        let text = loaded_event.target.result;\n        try {\n          sourcemap_data[idx] = JSON.parse(text);\n        } catch (e) {\n          upload_status.textContent = 'Status: Error parsing Sourcemap';\n          throw e;\n        }\n        if (sourcemap_data[idx] && sourcemap_data[idx].version === 3) {\n          upload_status.textContent = 'Status: Sourcemap loaded';\n          stackmapper[idx] = stack_mapper(sourcemap_data[idx]);\n          //local_storage.setJSON('sourcemap', sourcemap_data);\n        } else {\n          upload_status.textContent = 'Status: Error parsing Sourcemap (expected version: 3)';\n        }\n        update();\n      };\n\n      reader.readAsText(file_to_load, 'UTF-8');\n    });\n  });\n\n  function onStackChange(ev) {\n    if (ev.target.value.startsWith('(loaded ')) {\n      // ignore, leave stack_data\n    } else {\n      stack_data = ev.target.value;\n      local_storage.set('stack', stack_data);\n      update();\n    }\n  }\n  stack.addEventListener('textInput', (ev) => {\n    let text = ev.data;\n    if (text.length > 1000) {\n      // large paste, just store the data but don't add it to the DOM\n      stack_data = text;\n      ev.target.value = `(loaded ${text.length} bytes)`;\n      ev.preventDefault();\n      update();\n    }\n  });\n  stack.addEventListener('change', onStackChange);\n  stack.addEventListener('input', onStackChange);\n  stack.value = stack_data = local_storage.get('stack') || '';\n\n  function onIgnoreChange(ev) {\n    ignore_data = ev.target.value;\n    local_storage.set('ignore', ignore_data);\n    update();\n  }\n  ignore.addEventListener('change', onIgnoreChange);\n  ignore.addEventListener('input', onIgnoreChange);\n  ignore.value = ignore_data = local_storage.get('ignore') || '';\n\n  function onFramesChange(ev) {\n    let idx = ev.target.selectedIndex;\n    if (frames_bundle.selectedIndex !== idx) {\n      frames_bundle.selectedIndex = idx;\n    }\n    if (frames_source.selectedIndex !== idx) {\n      frames_source.selectedIndex = idx;\n    }\n    updateFocus();\n  }\n  frames_bundle.addEventListener('change', onFramesChange);\n  //frames_bundle.addEventListener('input', onFramesChange);\n  frames_source.addEventListener('change', onFramesChange);\n  //frames_source.addEventListener('input', onFramesChange);\n  frames_bundle.addEventListener('change', (ev) => {\n    selected_line.value = frames_bundle.raw_lines[ev.target.selectedIndex];\n  });\n  frames_source.addEventListener('change', (ev) => {\n    selected_line.value = frames_source.raw_lines[ev.target.selectedIndex];\n  });\n\n  //sourcemap_data = local_storage.getJSON('sourcemap');\n  if (sourcemap_data[0] && sourcemap_data[0].version === 3) {\n    upload_status.textContent = 'Status: Sourcemap loaded from local storage';\n  }\n\n  // Sync scroll areas\n  let scroll_locked_source = 0;\n  let scroll_locked_bundle = 0;\n  frames_source.addEventListener('scroll', () => {\n    if (Date.now() < scroll_locked_source) {\n      return;\n    }\n    scroll_locked_bundle = Date.now() + 400;\n    frames_bundle.scrollTop = frames_source.scrollTop;\n  });\n  frames_bundle.addEventListener('scroll', () => {\n    if (Date.now() < scroll_locked_bundle) {\n      return;\n    }\n    scroll_locked_source = Date.now() + 400;\n    frames_source.scrollTop = frames_bundle.scrollTop;\n  });\n\n  update();\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJkaXN0L2dhbWUvYnVpbGQuaW50ZXJtZWRpYXRlL2NsaWVudC9jbGllbnQvYXBwLmpzIiwiZGlzdC9nYW1lL2J1aWxkLmludGVybWVkaWF0ZS9jbGllbnQvZ2xvdi9jbGllbnQvZ2xvdi9ib290c3RyYXAuanMiLCJkaXN0L2dhbWUvYnVpbGQuaW50ZXJtZWRpYXRlL2NsaWVudC9nbG92L2NsaWVudC9nbG92L2xvY2FsX3N0b3JhZ2UuanMiLCJkaXN0L2dhbWUvYnVpbGQuaW50ZXJtZWRpYXRlL2NsaWVudC9nbG92L2NsaWVudC9nbG92L3BvbHlmaWxsLmpzIiwiZGlzdC9nYW1lL2J1aWxkLmludGVybWVkaWF0ZS9jbGllbnQvY2xpZW50L21haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7YUNJQSxJQUFJLFlBQWMsTUFDbEIsT0FBTyxPQUFTLFdBQ2QsR0FBSSxZQUFhLENBQ2YsT0FFRixZQUFjLEtBRWQsUUFBUSx1QkFDUixRQUFRLGFBQWE7Ozs7YUNQdkIsUUFBUSxpQkFFUixJQUFJLE1BQVEsU0FBUyxlQUFlLFNBQ3BDLE9BQU8sUUFBVSxTQUFVLEVBQUcsS0FBTSxLQUFNLElBQUssVUFDN0MsSUFBSSxJQUFTLEVBQVQsVUFBb0IsS0FBcEIsSUFBNEIsS0FBNUIsSUFBb0MsSUFBcEMsSUFDSixHQUFJLFVBQVksU0FBUyxNQUFPLENBQzlCLElBQUEsR0FBUyxTQUFTLE1BQ2xCLEdBQUksU0FBUyxRQUFTLENBQ3BCLEdBQUksSUFBSSxRQUFRLFNBQVMsWUFBYyxFQUFHLENBQ3hDLElBQVMsU0FBUyxRQUFsQixLQUE4QixLQUdsQyxJQUFJLE9BQVMsU0FBUyxTQUFTLFFBQVUsR0FDekMsR0FBSSxPQUFRLENBQ1YsR0FBSSxPQUFPLE9BQU8sS0FBTyxJQUFLLENBQzVCLFFBQVUsSUFFWixJQUFNLElBQUksTUFBTSxRQUFRLEtBQUssSUFHL0IsSUFBTSxJQUFJLFFBQVEs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cUJBQXVCLEVBQzNCLGNBQWMsaUJBQWlCLFNBQVUsV0FDdkMsR0FBSSxLQUFLLE1BQVEscUJBQXNCLENBQ3JDLE9BRUYscUJBQXVCLEtBQUssTUFBUSxJQUNwQyxjQUFjLFVBQVksY0FBYyxZQUUxQyxjQUFjLGlCQUFpQixTQUFVLFdBQ3ZDLEdBQUksS0FBSyxNQUFRLHFCQUFzQixDQUNyQyxPQUVGLHFCQUF1QixLQUFLLE1BQVEsSUFDcEMsY0FBYyxVQUFZLGNBQWMsWUFHMUMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvKiBlc2xpbnQgZ2xvYmFsLXJlcXVpcmU6b2ZmICovXG5cbi8vIFN0YXJ0dXAgY29kZS5cblxubGV0IGNhbGxlZF9vbmNlID0gZmFsc2U7XG53aW5kb3cub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICBpZiAoY2FsbGVkX29uY2UpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY2FsbGVkX29uY2UgPSB0cnVlO1xuICAvLyByZXF1aXJlKCcuL2dsb3Yvd29ya2VyX2NvbW0uanMnKS5zdGFydHVwKCk7IC8vIEZpcnN0LCBzbyBpdCBnZXRzIGxvYWRpbmcgcXVpY2tseSAoaWYgd29ya2VycyByZXF1aXJlZClcbiAgcmVxdWlyZSgnLi9nbG92L2Jvb3RzdHJhcC5qcycpO1xuICByZXF1aXJlKCcuL21haW4uanMnKS5tYWluKCk7XG59O1xuIiwiLy8gUG9ydGlvbnMgQ29weXJpZ2h0IDIwMTkgSmltYiBFc3NlciAoaHR0cHM6Ly9naXRodWIuY29tL0ppbWJseS8pXG4vLyBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZTogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVRcblxuLy8gVGhpbmdzIHRoYXQgc2hvdWxkIGJlIGRvbmUgYmVmb3JlIHJlcXVpcmluZyBvciBydW5uaW5nIGFueSB1c2VyLWxldmVsIGNvZGUgb3Igb3RoZXIgZW5naW5lIGNvZGVcblxucmVxdWlyZSgnLi9wb2x5ZmlsbC5qcycpO1xuXG5sZXQgZGVidWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVidWcnKTtcbndpbmRvdy5vbmVycm9yID0gZnVuY3Rpb24gKGUsIGZpbGUsIGxpbmUsIGNvbCwgZXJyb3JvYmopIHtcbiAgbGV0IG1zZyA9IGAke2V9XFxuICBhdCAke2ZpbGV9KCR7bGluZX06JHtjb2x9KWA7XG4gIGlmIChlcnJvcm9iaiAmJiBlcnJvcm9iai5zdGFjaykge1xuICAgIG1zZyA9IGAke2Vycm9yb2JqLnN0YWNrfWA7XG4gICAgaWYgKGVycm9yb2JqLm1lc3NhZ2UpIHtcbiAgICAgIGlmIChtc2cuaW5kZXhPZihlcnJvcm9iai5tZXNzYWdlKSA9PT0gLTEpIHtcbiAgICAgICAgbXNnID0gYCR7ZXJyb3JvYmoubWVzc2FnZX1cXG4ke21zZ31gO1xuICAgICAgfVxuICAgIH1cbiAgICBsZXQgb3JpZ2luID0gZG9jdW1lbnQubG9jYXRpb24ub3JpZ2luIHx8ICcnO1xuICAgIGlmIChvcmlnaW4pIHtcbiAgICAgIGlmIChvcmlnaW4uc2xpY2UoLTEpICE9PSAnLycpIHtcbiAgICAgICAgb3JpZ2luICs9ICcvJztcbiAgICAgIH1cbiAgICAgIG1zZyA9IG1zZy5zcGxpdChvcmlnaW4pLmpvaW4oJycpOyAvLyByZXBsYWNlXG4gICAgfVxuICAgIC8vIGZpeHVwIHdlaXJkIEZpcmVmb3ggd2VpcmRuZXNzXG4gICAgbXNnID0gbXNnLnJlcGxhY2UoL1xcW1xcZCtcXF08L2csICcnKSAvLyByZW1vdmUgZnVubnkgWzEyM10gYXQgc3RhcnQgb2Ygc3RhY2sgbGluZXNcbiAgICAgIC5yZXBsYWNlKC88P1xcLzw/L2csICcvJykgLy8gcmVtb3ZlIGZ1bm55IDxzLCB0aGV5IG1lc3MgdXAgcGVvcGxlJ3MgY29weSBhbmQgcGFzdGVcbiAgICAgIC5yZXBsYWNlKC9cXG4oW14gXSkvZywgJ1xcbiAgJDEnKTsgLy8gYWRkIGluZGVudGF0aW9uIGlmIG1pc3NpbmdcbiAgfVxuICBsZXQgc2hvdyA9IHRydWU7XG4gIGlmICh3aW5kb3cuZ2xvdl9lcnJvcl9yZXBvcnQpIHtcbiAgICBzaG93ID0gd2luZG93Lmdsb3ZfZXJyb3JfcmVwb3J0KG1zZywgZmlsZSwgbGluZSwgY29sKTtcbiAgfVxuICBpZiAoc2hvdykge1xuICAgIGRlYnVnLmlubmVyVGV4dCA9IGAke21zZ31cXG5cXG5QbGVhc2UgcmVwb3J0IHRoaXMgZXJyb3IgdG8gdGhlIGRldmVsb3BlciwgYW5kIHRoZW4gcmVsb2FkIHRoaXMgcGFnZS5gO1xuICB9XG59O1xud2luZG93LmRlYnVnbXNnID0gZnVuY3Rpb24gKG1zZywgY2xlYXIpIHtcbiAgaWYgKGNsZWFyKSB7XG4gICAgZGVidWcuaW5uZXJUZXh0ID0gbXNnO1xuICB9IGVsc2Uge1xuICAgIGRlYnVnLmlubmVyVGV4dCArPSBgJHttc2d9XFxuYDtcbiAgfVxufTtcbiIsIi8vIFBvcnRpb25zIENvcHlyaWdodCAyMDE5IEppbWIgRXNzZXIgKGh0dHBzOi8vZ2l0aHViLmNvbS9KaW1ibHkvKVxuLy8gUmVsZWFzZWQgdW5kZXIgTUlUIExpY2Vuc2U6IGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUXG4vKiBlc2xpbnQtZW52IGJyb3dzZXIgKi9cblxuZXhwb3J0cy5zdG9yYWdlX3ByZWZpeCA9ICdkZW1vJztcblxubGV0IGxzZCA9IChmdW5jdGlvbiAoKSB7XG4gIHRyeSB7XG4gICAgbG9jYWxTdG9yYWdlLnRlc3QgPSAndGVzdCc7XG4gICAgcmV0dXJuIGxvY2FsU3RvcmFnZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiB7fTtcbiAgfVxufSgpKTtcbmV4cG9ydCBmdW5jdGlvbiBnZXQoa2V5KSB7XG4gIGtleSA9IGAke2V4cG9ydHMuc3RvcmFnZV9wcmVmaXh9XyR7a2V5fWA7XG4gIGxldCByZXQgPSBsc2Rba2V5XTtcbiAgaWYgKHJldCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXQgPSB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldChrZXksIHZhbHVlKSB7XG4gIGtleSA9IGAke2V4cG9ydHMuc3RvcmFnZV9wcmVmaXh9XyR7a2V5fWA7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsKSB7XG4gICAgZGVsZXRlIGxzZFtrZXldO1xuICB9IGVsc2Uge1xuICAgIGxzZFtrZXldID0gdmFsdWU7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEpTT04oa2V5LCB2YWx1ZSkge1xuICBzZXQoa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SlNPTihrZXksIGRlZikge1xuICBsZXQgdmFsdWUgPSBnZXQoa2V5KTtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gZGVmO1xuICB9XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gaWdub3JlXG4gIH1cbiAgcmV0dXJuIGRlZjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyQWxsKGtleV9wcmVmaXgpIHtcbiAgbGV0IHByZWZpeCA9IG5ldyBSZWdFeHAoYF4ke2V4cG9ydHMuc3RvcmFnZV9wcmVmaXh9XyR7a2V5X3ByZWZpeCB8fCAnJ31gLCAndScpO1xuICBmb3IgKGxldCBrZXkgaW4gbHNkKSB7XG4gICAgaWYgKGtleS5tYXRjaChwcmVmaXgpKSB7XG4gICAgICBkZWxldGUgbHNkW2tleV07XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHBvcnRBbGwoKSB7XG4gIGxldCBvYmogPSB7fTtcbiAgbGV0IHByZWZpeCA9IG5ldyBSZWdFeHAoYF4ke2V4cG9ydHMuc3RvcmFnZV9wcmVmaXh9XyguKilgLCAndScpO1xuICBmb3IgKGxldCBrZXkgaW4gbHNkKSB7XG4gICAgbGV0IG0gPSBrZXkubWF0Y2gocHJlZml4KTtcbiAgICBpZiAobSkge1xuICAgICAgbGV0IHYgPSBsc2Rba2V5XTtcbiAgICAgIGlmICh2ICYmIHYgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIG9ialttWzFdXSA9IHY7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShvYmopO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW1wb3J0QWxsKHNlcmlhbGl6ZWQpIHtcbiAgbGV0IG9iaiA9IEpTT04ucGFyc2Uoc2VyaWFsaXplZCk7XG4gIGNsZWFyQWxsKCk7XG4gIGZvciAobGV0IGtleSBpbiBvYmopIHtcbiAgICBzZXQoa2V5LCBvYmpba2V5XSk7XG4gIH1cbn1cbiIsIi8qIGVzbGludCBuby1leHRlbmQtbmF0aXZlOm9mZixuby1pbnZhbGlkLXRoaXM6b2ZmICovXG5cbi8vIFR5cGVkQXJyYXkuc2xpY2UsIGZpbGwsIGpvaW4sIHNvcnQsIGV0YyAtIG5vdCBzdXBwb3J0ZWQgb24gSUUsIHNvbWUgb2xkZXIgU2FmYXJpLCBvbGRlciBBbmRyb2lkXG5sZXQgdHlwZWRhcnJheXMgPSBbSW50OEFycmF5LCBVaW50OEFycmF5LCBJbnQxNkFycmF5LCBVaW50MTZBcnJheSwgSW50MzJBcnJheSwgVWludDMyQXJyYXksIEZsb2F0MzJBcnJheV07XG5cbmlmICghVWludDhBcnJheS5wcm90b3R5cGUuc2xpY2UpIHtcbiAgdHlwZWRhcnJheXMuZm9yRWFjaChmdW5jdGlvbiAoQXJyYXlUeXBlKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5VHlwZS5wcm90b3R5cGUsICdzbGljZScsIHtcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiAoYmVnaW4sIGVuZCkge1xuICAgICAgICBpZiAoZW5kID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBlbmQgPSB0aGlzLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZW5kIDwgMCkge1xuICAgICAgICAgIGVuZCA9IHRoaXMubGVuZ3RoIC0gZW5kO1xuICAgICAgICB9XG4gICAgICAgIGJlZ2luID0gYmVnaW4gfHwgMDtcbiAgICAgICAgaWYgKGJlZ2luID49IHRoaXMubGVuZ3RoKSB7XG4gICAgICAgICAgYmVnaW4gPSB0aGlzLmxlbmd0aCAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVuZCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgICAgICAgZW5kID0gdGhpcy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVuZCA8IGJlZ2luKSB7XG4gICAgICAgICAgZW5kID0gYmVnaW47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxlbiA9IGVuZCAtIGJlZ2luO1xuICAgICAgICBsZXQgcmV0ID0gbmV3IEFycmF5VHlwZShsZW4pO1xuICAgICAgICBmb3IgKGxldCBpaSA9IGJlZ2luOyBpaSA8IGVuZDsgKytpaSkge1xuICAgICAgICAgIHJldFtpaV0gPSB0aGlzW2lpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gY21wRGVmYXVsdChhLCBiKSB7XG4gIHJldHVybiBhIC0gYjtcbn1cbmxldCByZXBsYWNlbWVudHMgPSB7XG4gIGpvaW46IGZ1bmN0aW9uIChkZWxpbSkge1xuICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuam9pbi5jYWxsKHRoaXMsIGRlbGltKTtcbiAgfSxcbiAgZmlsbDogZnVuY3Rpb24gKHZhbHVlLCBiZWdpbiwgZW5kKSB7XG4gICAgaWYgKGVuZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBlbmQgPSB0aGlzLmxlbmd0aDtcbiAgICB9XG4gICAgZm9yIChsZXQgaWkgPSBiZWdpbiB8fCAwOyBpaSA8IGVuZDsgKytpaSkge1xuICAgICAgdGhpc1tpaV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG4gIHNvcnQ6IGZ1bmN0aW9uIChjbXApIHtcbiAgICBBcnJheS5wcm90b3R5cGUuc29ydC5jYWxsKHRoaXMsIGNtcCB8fCBjbXBEZWZhdWx0KTtcbiAgfSxcbn07XG5cbmZvciAobGV0IGtleSBpbiByZXBsYWNlbWVudHMpIHtcbiAgaWYgKCFVaW50OEFycmF5LnByb3RvdHlwZVtrZXldKSB7XG4gICAgdHlwZWRhcnJheXMuZm9yRWFjaChmdW5jdGlvbiAoQXJyYXlUeXBlKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlUeXBlLnByb3RvdHlwZSwga2V5LCB7XG4gICAgICAgIHZhbHVlOiByZXBsYWNlbWVudHNba2V5XSxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG5cbmlmICghU3RyaW5nLnByb3RvdHlwZS5lbmRzV2l0aCkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3RyaW5nLnByb3RvdHlwZSwgJ2VuZHNXaXRoJywge1xuICAgIHZhbHVlOiBmdW5jdGlvbiAodGVzdCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2xpY2UoLXRlc3QubGVuZ3RoKSA9PT0gdGVzdDtcbiAgICB9LFxuICB9KTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZy5wcm90b3R5cGUsICdzdGFydHNXaXRoJywge1xuICAgIHZhbHVlOiBmdW5jdGlvbiAodGVzdCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2xpY2UoMCwgdGVzdC5sZW5ndGgpID09PSB0ZXN0O1xuICAgIH0sXG4gIH0pO1xufVxuIiwiLyogZXNsaW50IG5vLXVzZWxlc3MtY2F0Y2g6b2ZmICovXG5jb25zdCBhc3NlcnQgPSByZXF1aXJlKCdhc3NlcnQnKTtcbmNvbnN0IGxvY2FsX3N0b3JhZ2UgPSByZXF1aXJlKCcuL2dsb3YvbG9jYWxfc3RvcmFnZS5qcycpO1xubG9jYWxfc3RvcmFnZS5zdG9yYWdlX3ByZWZpeCA9ICdzdGFja3dhbGtlcic7XG5cbmNvbnN0IHF1ZXJ5c3RyaW5nID0gcmVxdWlyZSgncXVlcnktc3RyaW5nJyk7XG5jb25zdCBzdGFja19tYXBwZXIgPSByZXF1aXJlKCdzdGFjay1tYXBwZXInKTtcblxubGV0IGVycm9yX3JlcG9ydF9yZWdleCA9IC9eKFteIF0rKSBcXFsoW15cXF1dKyldIFwiUE9TVCAoW15cIj9dKyk/KFteXCJdKylcIiBTVEFSVCBcIihbXlwiXSspXCIgXCIoW15cIl0rKVwiJC87XG5sZXQgZmlsZWxpbmVfcmVnZXhzID0gW1xuICAvKC4pKFteKC86XSspXFwoKFxcZCspOihcXGQrKVxcKSQvLFxuICAvLy8oPzphdCAoW14oXSspIFxcKC4qXFwvKT8oW14oLzpdKyk6KFxcZCspKD86OihcXGQrKSk/XFwpJC8sXG4gIC8oPzphdCAoW14oXSspIFxcKCg/Oi4qXFwvKT8pPyhbXigvOl0rKTooXFxkKykoPzo6KFxcZCspKT9cXCkkLyxcbiAgL1xcLyooW14vQF0rKVxcLypALipcXC8oW14oLzpdKyk6KFxcZCspKD86OihcXGQrKSk/JC8sXG4gIC8oKShbXigvOl0rKTooXFxkKyk6KFxcZCspPyQvLFxuXTtcbi8vIGF0IE9iamVjdC5yZXBsYWNlVmlkZW9TaGFkb3dTdHlsZSAoPGFub255bW91cz46MTozNjAxKVxuXG5mdW5jdGlvbiBwcmV0dHlGaWxlTGluZShhKSB7XG4gIGlmIChhLmZuKSB7XG4gICAgcmV0dXJuIGAke2EuZm59ICgke2EuZmlsZW5hbWV9OiR7YS5saW5lfToke2EuY29sdW1ufSlgO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBgJHthLmZpbGVuYW1lfToke2EubGluZX06JHthLmNvbHVtbn1gO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBhcnNlSWdub3JlTGlzdCh0ZXh0KSB7XG4gIGxldCBsaW5lcyA9IHRleHQuc3BsaXQoJ1xcbicpLmZpbHRlcigoYSkgPT4gYS50cmltKCkpO1xuICByZXR1cm4gbGluZXMubWFwKChhKSA9PiB7XG4gICAgaWYgKGFbMF0gPT09ICcvJykge1xuICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoYSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBhO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGpzb25QYXJzZSh0ZXh0KSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UodGV4dCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5mdW5jdGlvbiBoZWFkZXJGcm9tUXVlcnkocXVlcnkpIHtcbiAgbGV0IGhlYWRlciA9IFtdO1xuICBpZiAocXVlcnkuY2lkeCAmJiBxdWVyeS5jaWR4ICE9PSAnMScpIHtcbiAgICBoZWFkZXIucHVzaChgQ0lEWD0ke3F1ZXJ5LmNpZHh9YCk7XG4gIH1cbiAgaWYgKHF1ZXJ5LmRpc2Nvbm5lY3RlZCkge1xuICAgIGhlYWRlci5wdXNoKCdESVNDT05ORUNURUQnKTtcbiAgfVxuICBpZiAocXVlcnkudmVyKSB7XG4gICAgaGVhZGVyLnB1c2goYHZlcj0ke3F1ZXJ5LnZlcn1gKTtcbiAgfVxuICBpZiAocXVlcnkudXNlcl9pZCkge1xuICAgIGhlYWRlci5wdXNoKGB1c2VyX2lkPSR7cXVlcnkudXNlcl9pZH1gKTtcbiAgfVxuICBpZiAocXVlcnkuY2xpZW50X2lkKSB7XG4gICAgaGVhZGVyLnB1c2goYGNsaWVudF9pZD0ke3F1ZXJ5LmNsaWVudF9pZH1gKTtcbiAgfVxuICByZXR1cm4gaGVhZGVyO1xufVxuXG5mdW5jdGlvbiBoZWFkZXIyRnJvbVF1ZXJ5KHF1ZXJ5KSB7XG4gIGxldCBoZWFkZXIgPSBbXTtcbiAgaWYgKHF1ZXJ5LndlYmdsKSB7XG4gICAgaGVhZGVyLnB1c2goYFdlYkdMJHtxdWVyeS53ZWJnbH1gKTtcbiAgfVxuICBpZiAocXVlcnkucmVuZGVyZXJfdW5tYXNrZWQpIHtcbiAgICBoZWFkZXIucHVzaChxdWVyeS5yZW5kZXJlcl91bm1hc2tlZCk7XG4gIH1cbiAgcmV0dXJuIGhlYWRlcjtcbn1cblxuZnVuY3Rpb24gaWdub3JlZChsaXN0LCB0ZXh0KSB7XG4gIGlmICghdGV4dCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgbGlzdC5sZW5ndGg7ICsraWkpIHtcbiAgICBpZiAobGlzdFtpaV0gaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICAgIGlmICh0ZXh0Lm1hdGNoKGxpc3RbaWldKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRleHQuaW5kZXhPZihsaXN0W2lpXSkgIT09IC0xKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiB1c2VyVVJMKHVybCkge1xuICBsZXQgbSA9IHVybC5tYXRjaCgvW14/XStcXC8oLiopLyk7XG4gIGlmIChtKSB7XG4gICAgcmV0dXJuIG1bMV07XG4gIH1cbiAgcmV0dXJuIHVybDtcbn1cblxuZnVuY3Rpb24gcHJlcGFyc2VHY2xvdWQoanNvbiwgaWdub3JlX2xpc3QpIHtcbiAgbGV0IHJldCA9IFtdO1xuICBsZXQgaWdub3JlX2NpZHggPSBpZ25vcmVfbGlzdC5pbmRleE9mKCdDSURYJykgIT09IC0xO1xuICBsZXQgaWdub3JlX2Rpc2Nvbm5lY3RlZCA9IGlnbm9yZV9saXN0LmluZGV4T2YoJ0RJU0NPTk5FQ1RFRCcpICE9PSAtMTtcbiAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IGpzb24ubGVuZ3RoOyArK2lpKSB7XG4gICAgbGV0IHJlY29yZCA9IGpzb25baWldO1xuICAgIGxldCB7IHRpbWVzdGFtcCB9ID0gcmVjb3JkO1xuICAgIGxldCBxdWVyeSA9IHJlY29yZC5qc29uUGF5bG9hZDtcbiAgICBhc3NlcnQocXVlcnkpO1xuICAgIGlmIChpZ25vcmVkKGlnbm9yZV9saXN0LCBxdWVyeS5tc2cpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGlnbm9yZV9jaWR4ICYmIHF1ZXJ5LmNpZHggJiYgcXVlcnkuY2lkeCAhPT0gJzEnKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGlnbm9yZV9kaXNjb25uZWN0ZWQgJiYgcXVlcnkuZGlzY29ubmVjdGVkKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgcmV0LnB1c2goYFVzZXIgVVJMPSR7dXNlclVSTChxdWVyeS51cmwpfSwgVUE9JHtxdWVyeS51YX0sIHRpbWVzdGFtcD0ke3RpbWVzdGFtcH1gKTtcbiAgICBsZXQgaGVhZGVyID0gaGVhZGVyRnJvbVF1ZXJ5KHF1ZXJ5KTtcbiAgICBpZiAoaGVhZGVyLmxlbmd0aCkge1xuICAgICAgcmV0LnB1c2goaGVhZGVyLmpvaW4oJywgJykpO1xuICAgIH1cbiAgICBsZXQgaGVhZGVyMiA9IGhlYWRlcjJGcm9tUXVlcnkocXVlcnkpO1xuICAgIGlmIChoZWFkZXIyLmxlbmd0aCkge1xuICAgICAgcmV0LnB1c2goaGVhZGVyMi5qb2luKCcsICcpKTtcbiAgICB9XG4gICAgaWYgKHF1ZXJ5LmZpbGUpIHtcbiAgICAgIGxldCBtID0gcXVlcnkuZmlsZS5tYXRjaCgvW14vXSskLyk7XG4gICAgICByZXQucHVzaChwcmV0dHlGaWxlTGluZSh7XG4gICAgICAgIGZpbGVuYW1lOiBtICYmIG1bMF0sXG4gICAgICAgIGxpbmU6IHF1ZXJ5LmxpbmUsXG4gICAgICAgIGNvbHVtbjogcXVlcnkuY29sLFxuICAgICAgfSkpO1xuICAgIH1cbiAgICByZXQgPSByZXQuY29uY2F0KHF1ZXJ5Lm1zZy5zcGxpdCgnXFxuJykpO1xuXG4gICAgcmV0LnB1c2goJycpO1xuICB9XG5cbiAgcmV0dXJuIHJldC5qb2luKCdcXG4nKTtcbn1cblxuZnVuY3Rpb24gcHJlcGFyc2UodGV4dCwgaWdub3JlX2xpc3QpIHtcbiAgbGV0IGpzb247XG4gIGlmICh0ZXh0WzBdID09PSAnWycgJiYgKGpzb24gPSBqc29uUGFyc2UodGV4dCkpKSB7XG4gICAgcmV0dXJuIHByZXBhcnNlR2Nsb3VkKGpzb24sIGlnbm9yZV9saXN0KTtcbiAgfVxuICBsZXQgbGluZXMgPSB0ZXh0LnNwbGl0KCdcXG4nKTtcbiAgbGV0IHJldCA9IFtdO1xuICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgbGluZXMubGVuZ3RoOyArK2lpKSB7XG4gICAgbGV0IGxpbmUgPSBsaW5lc1tpaV07XG4gICAgaWYgKGlnbm9yZWQoaWdub3JlX2xpc3QsIGxpbmUpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgbGV0IG0gPSBsaW5lLm1hdGNoKGVycm9yX3JlcG9ydF9yZWdleCk7XG4gICAgaWYgKCFtKSB7XG4gICAgICByZXQucHVzaChsaW5lKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICAvLyBsZXQgaXAgPSBtWzFdO1xuICAgIC8vIGxldCB0aW1lc3RhbXAgPSBtWzJdO1xuICAgIC8vIGxldCB1cmxfc3RhcnQgPSBtWzNdO1xuICAgIGxldCBzZWFyY2ggPSBtWzRdO1xuICAgIC8vIGxldCByZWZlcnJlciA9IG1bNV07XG4gICAgbGV0IHVzZXJhZ2VudCA9IG1bNl07XG4gICAgbGV0IHF1ZXJ5ID0gcXVlcnlzdHJpbmcucGFyc2Uoc2VhcmNoKTtcbiAgICAvLyBTb3VyY2UgVVJMIGxpbmVcbiAgICBpZiAocXVlcnkudXJsKSB7XG4gICAgICByZXQucHVzaCgnJyk7XG4gICAgICByZXQucHVzaChgVXNlciBVUkw9JHt1c2VyVVJMKHF1ZXJ5LnVybCl9LCBVQT0ke3VzZXJhZ2VudH1gKTtcbiAgICB9XG4gICAgLy8gSGVhZGVyIGxpbmVcbiAgICBsZXQgaGVhZGVyID0gaGVhZGVyRnJvbVF1ZXJ5KHF1ZXJ5KTtcbiAgICBpZiAoaGVhZGVyLmxlbmd0aCkge1xuICAgICAgcmV0LnB1c2goaGVhZGVyLmpvaW4oJywgJykpO1xuICAgIH1cbiAgICBpZiAocXVlcnkuZmlsZSkge1xuICAgICAgcmV0LnB1c2gocHJldHR5RmlsZUxpbmUoe1xuICAgICAgICBmaWxlbmFtZTogcXVlcnkuZmlsZS5tYXRjaCgvW14vXSskLylbMF0sXG4gICAgICAgIGxpbmU6IHF1ZXJ5LmxpbmUsXG4gICAgICAgIGNvbHVtbjogcXVlcnkuY29sLFxuICAgICAgfSkpO1xuICAgIH1cbiAgICByZXQgPSByZXQuY29uY2F0KHF1ZXJ5Lm1zZy5zcGxpdCgnXFxuJykpO1xuICB9XG4gIHJldHVybiByZXQuam9pbignXFxuJyk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlU3RhY2sodGV4dCwgaWdub3JlX2xpc3QpIHtcbiAgdGV4dCA9IHByZXBhcnNlKHRleHQsIGlnbm9yZV9saXN0KTtcbiAgbGV0IGxpbmVzID0gdGV4dC5zcGxpdCgnXFxuJyk7XG4gIGxpbmVzID0gbGluZXMubWFwKChsaW5lKSA9PiB7XG4gICAgbGV0IG07XG4gICAgZm9yIChsZXQgaWkgPSAwOyAhbSAmJiBpaSA8IGZpbGVsaW5lX3JlZ2V4cy5sZW5ndGg7ICsraWkpIHtcbiAgICAgIG0gPSBsaW5lLm1hdGNoKGZpbGVsaW5lX3JlZ2V4c1tpaV0pO1xuICAgIH1cbiAgICBpZiAobSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZm46IG1bMV0sXG4gICAgICAgIGZpbGVuYW1lOiBtWzJdLFxuICAgICAgICBsaW5lOiBtWzNdLFxuICAgICAgICBjb2x1bW46IG1bNF0gPyBOdW1iZXIobVs0XSkgOiB1bmRlZmluZWQsXG4gICAgICAgIHRvb2x0aXA6IGxpbmUsXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4geyBlcnI6IGxpbmUsIHRvb2x0aXA6IGxpbmUgfTtcbiAgfSk7XG4gIHJldHVybiBsaW5lcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1haW4oKSB7XG4gIGxldCB1cGxvYWRzID0gW1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cGxvYWQxJyksXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VwbG9hZDInKSxcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXBsb2FkMycpLFxuICBdO1xuICBsZXQgdXBsb2FkX3N0YXR1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cGxvYWRfc3RhdHVzJyk7XG4gIGxldCBzdGFjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFjaycpO1xuICBsZXQgaWdub3JlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lnbm9yZScpO1xuICBsZXQgZnJhbWVzX2J1bmRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmcmFtZXNfYnVuZGxlJyk7XG4gIGxldCBmcmFtZXNfc291cmNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZyYW1lc19zb3VyY2UnKTtcbiAgbGV0IHNvdXJjZWNvZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc291cmNlY29kZScpO1xuICBsZXQgc291cmNlX3ByZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb3VyY2VfcHJlJyk7XG4gIGxldCBzb3VyY2VfbGluZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb3VyY2VfbGluZScpO1xuICBsZXQgc291cmNlX3Bvc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc291cmNlX3Bvc3QnKTtcbiAgbGV0IGZpbGVpbmZvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGVpbmZvJyk7XG4gIGxldCBzZWxlY3RlZF9saW5lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbGVjdGVkX2xpbmUnKTtcblxuICBsZXQgc3RhY2tfZGF0YTtcbiAgbGV0IGlnbm9yZV9kYXRhO1xuICBsZXQgc291cmNlbWFwX2RhdGEgPSBbXTtcbiAgbGV0IHN0YWNrbWFwcGVyID0gW107XG5cbiAgbGV0IHJhd19saW5lcztcbiAgZnVuY3Rpb24gdG9PcHRpb25zKGxpc3QsIHNraXBfZGlzYWJsZWQpIHtcbiAgICByYXdfbGluZXMgPSBbXTtcbiAgICByZXR1cm4gbGlzdC5tYXAoKGEpID0+IHtcbiAgICAgIGxldCBzdHIgPSBhLmVyciAhPT0gdW5kZWZpbmVkID8gYS5lcnIgOiBwcmV0dHlGaWxlTGluZShhKTtcbiAgICAgIHJhd19saW5lcy5wdXNoKHN0cik7XG4gICAgICByZXR1cm4gYDxvcHRpb24ke2EuZXJyID8gJyBjbGFzcz1cImRpc2FibGVkXCInIDogJyd9YCArXG4gICAgICAgIGAke2EudG9vbHRpcD9gIHRpdGxlPVwiJHthLnRvb2x0aXAucmVwbGFjZSgvXCIvZywgJyZxdW90OycpLnJlcGxhY2UoLzwvZywgJyZsdDsnKX1cImA6Jyd9YCArXG4gICAgICAgIGA+JHtzdHIucmVwbGFjZSgvPC9nLCAnJmx0OycpfTwvb3B0aW9uPmA7XG4gICAgfSkuam9pbignXFxuJyk7XG4gIH1cblxuICBsZXQgbWFwcGVkX3N0YWNrO1xuXG4gIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAvLyB3aW5kb3cuZGVidWdtc2coJycsIHRydWUpO1xuICAgIGxldCBpZ25vcmVfbGlzdCA9IHBhcnNlSWdub3JlTGlzdChpZ25vcmVfZGF0YSk7XG4gICAgbGV0IHN0YWNrX2ZyYW1lcyA9IHBhcnNlU3RhY2soc3RhY2tfZGF0YSwgaWdub3JlX2xpc3QpO1xuICAgIGZyYW1lc19idW5kbGUuaW5uZXJIVE1MID0gdG9PcHRpb25zKHN0YWNrX2ZyYW1lcywgdHJ1ZSk7XG4gICAgZnJhbWVzX2J1bmRsZS5yYXdfbGluZXMgPSByYXdfbGluZXM7XG5cbiAgICBtYXBwZWRfc3RhY2sgPSBudWxsO1xuICAgIGlmICghc3RhY2ttYXBwZXJbMF0gJiYgIXN0YWNrbWFwcGVyWzFdICYmICFzdGFja21hcHBlclsyXSkge1xuICAgICAgZnJhbWVzX3NvdXJjZS5pbm5lckhUTUwgPSB0b09wdGlvbnMoW3sgZXJyOiAnTWlzc2luZyBzb3VyY2VtYXAnIH1dKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IGxpbmVfbWFwcGluZyA9IHt9O1xuICAgIGxldCB0b19wcm9jZXNzID0gW107XG4gICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IHN0YWNrX2ZyYW1lcy5sZW5ndGg7ICsraWkpIHtcbiAgICAgIGxldCBlbGVtID0gc3RhY2tfZnJhbWVzW2lpXTtcbiAgICAgIGlmIChlbGVtLmZpbGVuYW1lKSB7XG4gICAgICAgIGxpbmVfbWFwcGluZ1tpaV0gPSB0b19wcm9jZXNzLmxlbmd0aDtcbiAgICAgICAgdG9fcHJvY2Vzcy5wdXNoKHtcbiAgICAgICAgICBmaWxlbmFtZTogZWxlbS5maWxlbmFtZSxcbiAgICAgICAgICBsaW5lOiBlbGVtLmxpbmUsXG4gICAgICAgICAgY29sdW1uOiBlbGVtLmNvbHVtbiA/IGVsZW0uY29sdW1uIC0gMSA6IHVuZGVmaW5lZCwgLy8gdGhlIC0gMSBzZWVtcyB0byBoZWxwIG1hcCB0byB0aGUgcmlnaHQgbGluZSBhIGxvdFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IG91dHMgPSBbXTtcbiAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgc3RhY2ttYXBwZXIubGVuZ3RoOyArK2lpKSB7XG4gICAgICBpZiAoc3RhY2ttYXBwZXJbaWldKSB7XG4gICAgICAgIG91dHNbaWldID0gc3RhY2ttYXBwZXJbaWldLm1hcCh0b19wcm9jZXNzKTtcbiAgICAgICAgZm9yIChsZXQgamogPSAwOyBqaiA8IG91dHNbaWldLmxlbmd0aDsgKytqaikge1xuICAgICAgICAgIGFzc2VydC5lcXVhbChvdXRzW2lpXVtqal0sIHRvX3Byb2Nlc3NbampdKTsgLy8gdGhpcyBtb2RpZmllcyBpbi1wbGFjZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBvdXRfbGluZXMgPSBbXTtcbiAgICBtYXBwZWRfc3RhY2sgPSBbXTtcbiAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgc3RhY2tfZnJhbWVzLmxlbmd0aDsgKytpaSkge1xuICAgICAgaWYgKGxpbmVfbWFwcGluZ1tpaV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBtYXBwZWRfc3RhY2sucHVzaChudWxsKTtcbiAgICAgICAgb3V0X2xpbmVzLnB1c2goeyBlcnI6ICcnIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IG1hcHBlZCA9IHRvX3Byb2Nlc3NbbGluZV9tYXBwaW5nW2lpXV07XG4gICAgICAgIG1hcHBlZF9zdGFjay5wdXNoKG1hcHBlZCk7XG4gICAgICAgIG91dF9saW5lcy5wdXNoKG1hcHBlZCk7XG4gICAgICB9XG4gICAgfVxuICAgIGZyYW1lc19zb3VyY2UuaW5uZXJIVE1MID0gdG9PcHRpb25zKG91dF9saW5lcyk7XG4gICAgZnJhbWVzX3NvdXJjZS5yYXdfbGluZXMgPSByYXdfbGluZXM7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVGb2N1cygpIHtcbiAgICBsZXQgaWR4ID0gZnJhbWVzX2J1bmRsZS5zZWxlY3RlZEluZGV4O1xuICAgIGxldCBsaW5laW5mbyA9IG1hcHBlZF9zdGFjayAmJiBtYXBwZWRfc3RhY2tbaWR4XTtcbiAgICBpZiAoIXNvdXJjZW1hcF9kYXRhWzBdICYmICFzb3VyY2VtYXBfZGF0YVsxXSAmJiAhc291cmNlbWFwX2RhdGFbMl0pIHtcbiAgICAgIHNvdXJjZV9wcmUudGV4dENvbnRlbnQgPSAnTm8gc291cmNlbWFwIGxvYWRlZCc7XG4gICAgICBzb3VyY2VfbGluZS50ZXh0Q29udGVudCA9IHNvdXJjZV9wb3N0LnRleHRDb250ZW50ID0gZmlsZWluZm8udGV4dENvbnRlbnQgPSAnJztcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFsaW5laW5mbykge1xuICAgICAgc291cmNlX3ByZS50ZXh0Q29udGVudCA9ICdObyBzb3VyY2Ugc2VsZWN0ZWQnO1xuICAgICAgc291cmNlX2xpbmUudGV4dENvbnRlbnQgPSBzb3VyY2VfcG9zdC50ZXh0Q29udGVudCA9IGZpbGVpbmZvLnRleHRDb250ZW50ID0gJyc7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCB7IGZpbGVuYW1lLCBsaW5lIH0gPSBsaW5laW5mbztcbiAgICBmb3IgKGxldCBqaiA9IDA7IGpqIDwgc291cmNlbWFwX2RhdGEubGVuZ3RoOyArK2pqKSB7XG4gICAgICBsZXQgeyBzb3VyY2VzLCBzb3VyY2VzQ29udGVudCB9ID0gc291cmNlbWFwX2RhdGFbampdO1xuICAgICAgZmlsZWluZm8udGV4dENvbnRlbnQgPSBgRmlsZTogJHtmaWxlbmFtZX1gO1xuICAgICAgbGV0IGZvdW5kID0gLTE7XG4gICAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgc291cmNlcy5sZW5ndGg7ICsraWkpIHtcbiAgICAgICAgaWYgKHNvdXJjZXNbaWldLmVuZHNXaXRoKGZpbGVuYW1lKSkge1xuICAgICAgICAgIGZvdW5kID0gaWk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChmb3VuZCA9PT0gLTEgfHwgIXNvdXJjZXNDb250ZW50W2ZvdW5kXSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGxldCBsaW5lcyA9IHNvdXJjZXNDb250ZW50W2ZvdW5kXS5zcGxpdCgnXFxuJyk7XG4gICAgICBzb3VyY2VfcHJlLnRleHRDb250ZW50ID0gbGluZXMuc2xpY2UoMCwgbGluZSAtIDEpLmpvaW4oJ1xcbicpO1xuICAgICAgc291cmNlX2xpbmUudGV4dENvbnRlbnQgPSBsaW5lc1tsaW5lIC0gMV07XG4gICAgICBzb3VyY2VfcG9zdC50ZXh0Q29udGVudCA9IGxpbmVzLnNsaWNlKGxpbmUsIGxpbmVzLmxlbmd0aCkuam9pbignXFxuJyk7XG4gICAgICBzb3VyY2VfbGluZS5zY3JvbGxJbnRvVmlldyh0cnVlKTtcbiAgICAgIGxldCBzdCA9IHNvdXJjZWNvZGUuc2Nyb2xsVG9wO1xuICAgICAgc291cmNlX2xpbmUuc2Nyb2xsSW50b1ZpZXcoZmFsc2UpO1xuICAgICAgc3QgKz0gc291cmNlY29kZS5zY3JvbGxUb3A7XG4gICAgICBzb3VyY2Vjb2RlLnNjcm9sbFRvcCA9IE1hdGgucm91bmQoc3QgLyAyKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc291cmNlX3ByZS50ZXh0Q29udGVudCA9IGBDb3VsZCBub3QgZmluZCAke2ZpbGVuYW1lfSBpbiBzb3VyY2VtYXAuc291cmNlc2A7XG4gICAgc291cmNlX2xpbmUudGV4dENvbnRlbnQgPSBzb3VyY2VfcG9zdC50ZXh0Q29udGVudCA9ICcnO1xuICB9XG5cbiAgdXBsb2Fkcy5mb3JFYWNoKChlbGVtLCBpZHgpID0+IHtcbiAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChldikgPT4ge1xuICAgICAgbGV0IGZpbGVfdG9fbG9hZCA9IGVsZW0uZmlsZXNbMF07XG4gICAgICBpZiAoIWZpbGVfdG9fbG9hZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgIGxvY2FsX3N0b3JhZ2Uuc2V0KCdzb3VyY2VtYXAnLCB1bmRlZmluZWQpO1xuICAgICAgc291cmNlbWFwX2RhdGFbaWR4XSA9IG51bGw7XG4gICAgICBzdGFja21hcHBlcltpZHhdID0gbnVsbDtcbiAgICAgIHJlYWRlci5vbmxvYWQgPSAobG9hZGVkX2V2ZW50KSA9PiB7XG4gICAgICAgIGxldCB0ZXh0ID0gbG9hZGVkX2V2ZW50LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgc291cmNlbWFwX2RhdGFbaWR4XSA9IEpTT04ucGFyc2UodGV4dCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICB1cGxvYWRfc3RhdHVzLnRleHRDb250ZW50ID0gJ1N0YXR1czogRXJyb3IgcGFyc2luZyBTb3VyY2VtYXAnO1xuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNvdXJjZW1hcF9kYXRhW2lkeF0gJiYgc291cmNlbWFwX2RhdGFbaWR4XS52ZXJzaW9uID09PSAzKSB7XG4gICAgICAgICAgdXBsb2FkX3N0YXR1cy50ZXh0Q29udGVudCA9ICdTdGF0dXM6IFNvdXJjZW1hcCBsb2FkZWQnO1xuICAgICAgICAgIHN0YWNrbWFwcGVyW2lkeF0gPSBzdGFja19tYXBwZXIoc291cmNlbWFwX2RhdGFbaWR4XSk7XG4gICAgICAgICAgLy9sb2NhbF9zdG9yYWdlLnNldEpTT04oJ3NvdXJjZW1hcCcsIHNvdXJjZW1hcF9kYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1cGxvYWRfc3RhdHVzLnRleHRDb250ZW50ID0gJ1N0YXR1czogRXJyb3IgcGFyc2luZyBTb3VyY2VtYXAgKGV4cGVjdGVkIHZlcnNpb246IDMpJztcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGUoKTtcbiAgICAgIH07XG5cbiAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGVfdG9fbG9hZCwgJ1VURi04Jyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIG9uU3RhY2tDaGFuZ2UoZXYpIHtcbiAgICBpZiAoZXYudGFyZ2V0LnZhbHVlLnN0YXJ0c1dpdGgoJyhsb2FkZWQgJykpIHtcbiAgICAgIC8vIGlnbm9yZSwgbGVhdmUgc3RhY2tfZGF0YVxuICAgIH0gZWxzZSB7XG4gICAgICBzdGFja19kYXRhID0gZXYudGFyZ2V0LnZhbHVlO1xuICAgICAgbG9jYWxfc3RvcmFnZS5zZXQoJ3N0YWNrJywgc3RhY2tfZGF0YSk7XG4gICAgICB1cGRhdGUoKTtcbiAgICB9XG4gIH1cbiAgc3RhY2suYWRkRXZlbnRMaXN0ZW5lcigndGV4dElucHV0JywgKGV2KSA9PiB7XG4gICAgbGV0IHRleHQgPSBldi5kYXRhO1xuICAgIGlmICh0ZXh0Lmxlbmd0aCA+IDEwMDApIHtcbiAgICAgIC8vIGxhcmdlIHBhc3RlLCBqdXN0IHN0b3JlIHRoZSBkYXRhIGJ1dCBkb24ndCBhZGQgaXQgdG8gdGhlIERPTVxuICAgICAgc3RhY2tfZGF0YSA9IHRleHQ7XG4gICAgICBldi50YXJnZXQudmFsdWUgPSBgKGxvYWRlZCAke3RleHQubGVuZ3RofSBieXRlcylgO1xuICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHVwZGF0ZSgpO1xuICAgIH1cbiAgfSk7XG4gIHN0YWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uU3RhY2tDaGFuZ2UpO1xuICBzdGFjay5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIG9uU3RhY2tDaGFuZ2UpO1xuICBzdGFjay52YWx1ZSA9IHN0YWNrX2RhdGEgPSBsb2NhbF9zdG9yYWdlLmdldCgnc3RhY2snKSB8fCAnJztcblxuICBmdW5jdGlvbiBvbklnbm9yZUNoYW5nZShldikge1xuICAgIGlnbm9yZV9kYXRhID0gZXYudGFyZ2V0LnZhbHVlO1xuICAgIGxvY2FsX3N0b3JhZ2Uuc2V0KCdpZ25vcmUnLCBpZ25vcmVfZGF0YSk7XG4gICAgdXBkYXRlKCk7XG4gIH1cbiAgaWdub3JlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uSWdub3JlQ2hhbmdlKTtcbiAgaWdub3JlLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0Jywgb25JZ25vcmVDaGFuZ2UpO1xuICBpZ25vcmUudmFsdWUgPSBpZ25vcmVfZGF0YSA9IGxvY2FsX3N0b3JhZ2UuZ2V0KCdpZ25vcmUnKSB8fCAnJztcblxuICBmdW5jdGlvbiBvbkZyYW1lc0NoYW5nZShldikge1xuICAgIGxldCBpZHggPSBldi50YXJnZXQuc2VsZWN0ZWRJbmRleDtcbiAgICBpZiAoZnJhbWVzX2J1bmRsZS5zZWxlY3RlZEluZGV4ICE9PSBpZHgpIHtcbiAgICAgIGZyYW1lc19idW5kbGUuc2VsZWN0ZWRJbmRleCA9IGlkeDtcbiAgICB9XG4gICAgaWYgKGZyYW1lc19zb3VyY2Uuc2VsZWN0ZWRJbmRleCAhPT0gaWR4KSB7XG4gICAgICBmcmFtZXNfc291cmNlLnNlbGVjdGVkSW5kZXggPSBpZHg7XG4gICAgfVxuICAgIHVwZGF0ZUZvY3VzKCk7XG4gIH1cbiAgZnJhbWVzX2J1bmRsZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvbkZyYW1lc0NoYW5nZSk7XG4gIC8vZnJhbWVzX2J1bmRsZS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIG9uRnJhbWVzQ2hhbmdlKTtcbiAgZnJhbWVzX3NvdXJjZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvbkZyYW1lc0NoYW5nZSk7XG4gIC8vZnJhbWVzX3NvdXJjZS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIG9uRnJhbWVzQ2hhbmdlKTtcbiAgZnJhbWVzX2J1bmRsZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZXYpID0+IHtcbiAgICBzZWxlY3RlZF9saW5lLnZhbHVlID0gZnJhbWVzX2J1bmRsZS5yYXdfbGluZXNbZXYudGFyZ2V0LnNlbGVjdGVkSW5kZXhdO1xuICB9KTtcbiAgZnJhbWVzX3NvdXJjZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZXYpID0+IHtcbiAgICBzZWxlY3RlZF9saW5lLnZhbHVlID0gZnJhbWVzX3NvdXJjZS5yYXdfbGluZXNbZXYudGFyZ2V0LnNlbGVjdGVkSW5kZXhdO1xuICB9KTtcblxuICAvL3NvdXJjZW1hcF9kYXRhID0gbG9jYWxfc3RvcmFnZS5nZXRKU09OKCdzb3VyY2VtYXAnKTtcbiAgaWYgKHNvdXJjZW1hcF9kYXRhWzBdICYmIHNvdXJjZW1hcF9kYXRhWzBdLnZlcnNpb24gPT09IDMpIHtcbiAgICB1cGxvYWRfc3RhdHVzLnRleHRDb250ZW50ID0gJ1N0YXR1czogU291cmNlbWFwIGxvYWRlZCBmcm9tIGxvY2FsIHN0b3JhZ2UnO1xuICB9XG5cbiAgLy8gU3luYyBzY3JvbGwgYXJlYXNcbiAgbGV0IHNjcm9sbF9sb2NrZWRfc291cmNlID0gMDtcbiAgbGV0IHNjcm9sbF9sb2NrZWRfYnVuZGxlID0gMDtcbiAgZnJhbWVzX3NvdXJjZS5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoKSA9PiB7XG4gICAgaWYgKERhdGUubm93KCkgPCBzY3JvbGxfbG9ja2VkX3NvdXJjZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzY3JvbGxfbG9ja2VkX2J1bmRsZSA9IERhdGUubm93KCkgKyA0MDA7XG4gICAgZnJhbWVzX2J1bmRsZS5zY3JvbGxUb3AgPSBmcmFtZXNfc291cmNlLnNjcm9sbFRvcDtcbiAgfSk7XG4gIGZyYW1lc19idW5kbGUuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4ge1xuICAgIGlmIChEYXRlLm5vdygpIDwgc2Nyb2xsX2xvY2tlZF9idW5kbGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2Nyb2xsX2xvY2tlZF9zb3VyY2UgPSBEYXRlLm5vdygpICsgNDAwO1xuICAgIGZyYW1lc19zb3VyY2Uuc2Nyb2xsVG9wID0gZnJhbWVzX2J1bmRsZS5zY3JvbGxUb3A7XG4gIH0pO1xuXG4gIHVwZGF0ZSgpO1xufVxuIl19"}